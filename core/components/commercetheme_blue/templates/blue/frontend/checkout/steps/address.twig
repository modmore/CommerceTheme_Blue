<form method="POST" action="{{ current_url }}">
    <input type="hidden" name="add_address" value="1">

    <h3>{{ lex('commerce.shipping_address') }}</h3>

    <div class="c-collapsable-box">
        <div class="c-collapsable-option">
            <input type="radio" class="c-collapsable-toggle" id="shipping-address-previous" name="shipping_address" value="previous" checked>
            <label class="c-collapsable-option-title" for="shipping-address-previous">
                <span class="icon icon--checked">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                </span>
                <span class="icon icon--unchecked">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                </span>
                Saved address
            </label>
            <div class="c-collapsable-option-content">
                <div class="c-collapsable-box c-collapsable-box__inline-icon">
                    {% for address in previously_used_shipping %}
                        {% include "frontend/checkout/partial/previous-address.twig" with {
                            address: address,
                            type: 'shipping',
                            current_address: address_shipping_user_address
                        } %}
                    {% endfor %}
                </div>
            </div>
        </div>
        <div class="c-collapsable-option">
            <input type="radio" class="c-collapsable-toggle" id="shipping-address-new" name="shipping_address" value="new">
            <label class="c-collapsable-option-title" for="shipping-address-new">
                <span class="icon icon--checked">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                </span>
                <span class="icon icon--unchecked">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                </span>
                Add new address
            </label>
            <div class="c-collapsable-option-content">
                {% include "frontend/checkout/partial/shipping-address-fields.twig" %}
            </div>
        </div>
    </div>

    <h3>{{ lex('commerce.billing_address') }}</h3>

    <div class="c-collapsable-box">
        <div class="c-collapsable-option">
            <input type="radio" class="c-collapsable-toggle" id="billing-address-same" name="billing_address" value="same" checked>
            <label class="c-collapsable-option-title" for="billing-address-same">
                <span class="icon icon--checked">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                </span>
                <span class="icon icon--unchecked">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                </span>
                Same as shipping address
            </label>
        </div>
        <div class="c-collapsable-option">
            <input type="radio" class="c-collapsable-toggle" id="billing-address-previous" name="billing_address" value="previous">
            <label class="c-collapsable-option-title" for="billing-address-previous">
                <span class="icon icon--checked">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                </span>
                <span class="icon icon--unchecked">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                </span>
                Saved address
            </label>
            <div class="c-collapsable-option-content">
                <div class="c-collapsable-box c-collapsable-box__inline-icon">
                    {% for address in previously_used_billing %}
                        {% include "frontend/checkout/partial/previous-address.twig" with {
                            address: address,
                            type: 'billing',
                            current_address: address_billing_user_address
                        } %}
                    {% endfor %}
                </div>
            </div>
        </div>
        <div class="c-collapsable-option">
            <input type="radio" class="c-collapsable-toggle" id="billing-address-new" name="billing_address" value="new">
            <label class="c-collapsable-option-title" for="billing-address-new">
                <span class="icon icon--checked">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                </span>
                <span class="icon icon--unchecked">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                </span>
                Add new address
            </label>
            <div class="c-collapsable-option-content">
                {% include "frontend/checkout/partial/billing-address-fields.twig" %}
            </div>
        </div>
    </div>

    <div class="c-submit">
        <button class="c-button c-primary-button">Confirm address</button>
    </div>
</form>


{#    <div class="c-step-box">#}
{#        {% if previously_used_shipping|length > 0 %}#}
{#            <div class="c-checkout-previous-address-list">#}
{#                {% for address in previously_used_shipping %}#}
{#                    {% include "frontend/checkout/partial/previous-address.twig" with #}{#}#}
{#                        address: address,#}
{#                        type: 'shipping',#}
{#                        current_address: address_shipping_user_address#}
{#                    } %}#}
{#                {% endfor %}#}

{#                <div class="c-method-wrapper c-shipping-address-wrapper">#}
{#                    <input type="radio"#}
{#                           name="shipping_address"#}
{#                           class="c-method-radio c-shipping-address-radio"#}
{#                           id="shipping-address-new"#}
{#                           value="new"#}
{#                           {% if address_shipping_id == 'new' %}checked="checked"{% endif %}#}
{#                    >#}
{#                    <div class="c-method-section c-shipping-address-section">#}
{#                        <label for="shipping-address-new">#}
{#                            {{ lex('commerce.add_new_address') }}#}
{#                        </label>#}
{#                        <div class="c-method-details">#}
{#        {% endif %}#}

{#        {% include 'frontend/checkout/partial/shipping-address-fields.twig' %}#}

{#        {% if previously_used_shipping|length > 0 %}#}
{#                        </div>#}
{#                    </div>#}
{#                </div>#}
{#            </div>#}
{#        {% endif %}#}

{#    </div>#}

{#    <div class="c-step-box">#}
{#        <h3>{{ lex('commerce.billing_address') }}</h3>#}

{#        <div class="c-method-wrapper c-billing-address-wrapper">#}
{#            <input type="radio"#}
{#                   name="billing_address"#}
{#                   class="c-method-radio c-billing-address-radio"#}
{#                   id="billing-address-same"#}
{#                   value="same"#}
{#                   {% if address_billing_id == 'same' %}checked="checked"{% endif %}#}
{#            >#}
{#            <div class="c-method-section c-shipping-address-section">#}
{#                <label for="billing-address-same">{{ lex('commerce.same_as_shipping') }}</label>#}
{#            </div>#}
{#        </div>#}

{#        {% if previously_used_billing|length > 0 %}#}
{#        <div class="c-checkout-previous-address-list">#}
{#            {% for address in previously_used_billing %}#}
{#                {% include "frontend/checkout/partial/previous-address.twig" with {#}
{#                    address: address,#}
{#                    type: 'billing',#}
{#                    current_address: address_billing_user_address#}
{#                } %}#}
{#            {% endfor %}#}
{#        </div>#}
{#        {% endif %}#}

{#        <div class="c-method-wrapper c-billing-address-wrapper">#}
{#            <input type="radio"#}
{#                   name="billing_address"#}
{#                   class="c-method-radio c-billing-address-radio"#}
{#                   id="billing-address-new"#}
{#                   value="new"#}
{#                   {% if address_billing_id == 'new' %}checked="checked"{% endif %}#}
{#            >#}
{#            <div class="c-method-section c-shipping-address-section">#}
{#                <label for="billing-address-new">{{ lex('commerce.add_new_address') }}</label>#}
{#                <div class="c-method-details">#}
{#                    {% include 'frontend/checkout/partial/billing-address-fields.twig' %}#}
{#                </div>#}
{#            </div>#}
{#        </div>#}

{#        <div class="c-submit">#}
{#            <button class="c-button c-primary-button">{{ lex('commerce.checkout_address_confirm') }}</button>#}
{#        </div>#}
{#    </div>#}